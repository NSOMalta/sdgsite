---
layout: default
title: Interactive Maps
---
<div class="container">
  {% include components/page/breadcrumbs.html %}
</div>
<div id="main-content" class="container mapslist" role="main">
    <div class="col-md-12">
      {% if page.title %}
      <h1>{{ page.title | t }}</h1>
      {% endif %}

      <div class = "maps-container" style="visibility:hidden;">
      <div class="map-indicator-buttons">
          <button type="button" class="map-button" data-map="121" data-color="#EB1C2D">1.2.1</button>
          <button type="button" class="map-button" data-map="122" data-color="#EB1C2D">1.2.2</button>
          <button type="button" class="map-button" data-map="431" data-color="#C31F33">4.3.1</button>
          <button type="button" class="map-button" data-map="852" data-color="#8F1838">8.5.2</button>
          <button type="button" class="map-button" data-map="331" data-color="#4C9F38">3.3.1</button>
      </div>

      <div class="embedded-maps">
        <div id="updateHeader" class="map-header">
        </div>
        <div id="updateMap" class="map-content">
        </div>
      </div>
      </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {        

  const updateMap = document.getElementById('updateMap');
  const updateHeader = document.getElementById('updateHeader');

  // Configuration object for maps
  const mapsConfig = {
    "121": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=7f02693599a647ed994124ce6c8137ef&level=11",
      color: "#EB1C2D",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg1 icon.svg",
      title: "1.2.1 - At risk of poverty (ARP) rate",
    },
    "122": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=7745ebbac78c4a5e9b0149d378014b23&level=11",
      color: "#EB1C2D",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg1 icon.svg",
      title: "1.2.2 - At risk of poverty or social exclusion (AROPE) rate",
    },
    "431": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=752d577fddc946e3876d21dbb6e73ff4&level=11",
      color: "#C31F33",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg4 icon.svg",
      title: "4.3.1 - Tertiary education attainment rate",
    },
    "852": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=567a7e5073ca486fa6979dc7e9f27022&level=11",
      color: "#8F1838",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg8 icon.svg",
      title: "8.5.2 - Employment Rate",
    },
    "331": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=567a7e5073ca486fa6979dc7e9f27022&level=11",
      color: "#4C9F38",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg8 icon.svg",
      title: "3.3.1 - Test",
    },
  };

  // Load a map
function loadMap(key) {
  const config = mapsConfig[key];
  if (!config) return;
  updateMap.innerHTML = `
    <iframe src="${config.src}" 
            frameborder="0" 
            style="border:0; width:100%; height:600px;" 
            allowfullscreen>
      iFrames are not supported on this page.
    </iframe>`;
  updateHeader.innerHTML = `
    <img src="${config.img}" alt="sdg icon">
    <h3>${config.title}</h3>`;
  updateHeader.style.backgroundColor = config.color;

  document.querySelectorAll('.map-button').forEach(btn => {
    btn.style.setProperty('--button-color', btn.dataset.color);
    
    if (btn.dataset.map === key) {
      btn.classList.add("active");
    } else {
      btn.classList.remove("active");
    }
  });
  
  sessionStorage.setItem("currentMap", key);
}

document.querySelectorAll(".map-button").forEach(btn => {
  // Set CSS variable once on initialization
  btn.style.setProperty('--button-color', btn.dataset.color);
  btn.addEventListener("click", () => loadMap(btn.dataset.map));
});


  document.querySelectorAll(".map-button").forEach(btn => {
    btn.style.color = btn.dataset.color;
    btn.style.border = `2px solid ${btn.dataset.color}`;
    btn.addEventListener("click", () => loadMap(btn.dataset.map));
  });

  const mapToLoad = sessionStorage.getItem("currentMap") || "121";
  loadMap(mapToLoad);

  document.querySelector('.maps-container').style.visibility = 'visible';
});
</script>
