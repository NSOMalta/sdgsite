---
layout: default
title: Interactive Maps
---
<div class="container">
  {% include components/page/breadcrumbs.html %}
</div>
<div id="main-content" class="container mapslist" role="main">
    <div class="col-md-12">
      {% if page.title %}
      <h1>{{ page.title | t }}</h1>
      {% endif %}

      <div class = "maps-container" style="visibility:hidden;">
      <div class ="map-indicator-buttons">
        <button type="button" id="map-1-2-1">1.2.1</button>
        <button type="button" id="map-1-2-2">1.2.2</button>
        <button type="button" id="map-4">4.3.1</button>
        <button type="button" id="map-8">8.5.2</button>
      </div>
      <div class="embedded-maps">
        <div id="updateHeader" class="map-header">
<!--           <img src="https://NSOMalta.github.io/sdgsite/assets/img/sdg1 icon.svg" alt="sdg icon">
          <h3>1.2.1 - At risk of poverty (ARP) rate</h3> -->
        </div>
        <div id="updateMap" class="map-content">
<!--           <iframe src=https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=7f02693599a647ed994124ce6c8137ef&level=11 frameborder="0" style="border:0" allowfullscreen>iFrames are not supported on this page.</iframe> -->
        </div>
      </div>
      </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {        

  const updateMap = document.getElementById('updateMap');
  const updateHeader = document.getElementById('updateHeader');

  // Configuration object for all maps
  const mapsConfig = {
    "121": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=7f02693599a647ed994124ce6c8137ef&level=11",
      color: "#EB1C2D",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg1 icon.svg",
      title: "1.2.1 - At risk of poverty (ARP) rate",
      buttonId: "map-1-2-1",
    },
    "122": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=7745ebbac78c4a5e9b0149d378014b23&level=11",
      color: "#EB1C2D",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg1 icon.svg",
      title: "1.2.2 - At risk of poverty or social exclusion (AROPE) rate",
      buttonId: "map-1-2-2",
    },
    "4": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=752d577fddc946e3876d21dbb6e73ff4&level=11",
      color: "#C31F33",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg4 icon.svg",
      title: "4.3.1 - Tertiary education attainment rate",
      buttonId: "map-4",
    },
    "8": {
      src: "https://msa-mt.maps.arcgis.com/apps/instant/basic/index.html?appid=567a7e5073ca486fa6979dc7e9f27022&level=11",
      color: "#8F1838",
      img: "https://NSOMalta.github.io/sdgsite/assets/img/sdg8 icon.svg",
      title: "8.5.2 - Employment Rate",
      buttonId: "map-8",
    },
  };

 
  function loadMap(key) {
    const config = mapsConfig[key];
    if (!config) return;

    // Update iframe
    updateMap.innerHTML = `
      <iframe src="${config.src}" 
              frameborder="0" 
              style="border:0; width:100%; height:600px;" 
              allowfullscreen>
        iFrames are not supported on this page.
      </iframe>`;

    // Update header
    updateHeader.innerHTML = `
      <img src="${config.img}" alt="sdg icon">
      <h3>${config.title}</h3>`;
    updateHeader.style.backgroundColor = config.color;

    // Update button states
    Object.values(mapsConfig).forEach(cfg => {
      const btn = document.getElementById(cfg.buttonId);
      if (cfg === config) {
        btn.style.backgroundColor = config.color;
        btn.style.color = "white";
        btn.style.pointerEvents = "none";
        btn.style.cursor = "default";
      } else {
        btn.style.backgroundColor = "white";
        btn.style.color = cfg.color;
        btn.style.border = `2px solid ${cfg.color}`;
        btn.style.pointerEvents = "auto";
        btn.style.cursor = "pointer";
      }
    });

    // Save state
    sessionStorage.setItem("currentMap", key);
  }

  // Add event listeners dynamically
  Object.entries(mapsConfig).forEach(([key, cfg]) => {
    document.getElementById(cfg.buttonId).addEventListener("click", () => loadMap(key));
  });

  // Restore last viewed map or load default
  const mapToLoad = sessionStorage.getItem("currentMap") || "121";
  loadMap(mapToLoad);

  // Show container after setup
  document.querySelector('.maps-container').style.visibility = 'visible';

});
</script>
